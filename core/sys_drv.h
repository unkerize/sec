//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
#ifndef _HK_SYS_DRV_H
#define _HK_SYS_DRV_H
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
#include "system.h"
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
// main osc source
#define _OSC_HSI     1
#define _OSC_HSE     2

// ahb clk source
#define _CLK_AHB_HSI 1
#define _CLK_AHB_HSE 2
#define _CLK_AHB_PLL 3
//-------------------------------------------------------------------------
#define rtc_CRYSTAL 32768
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
#if defined(STM32F030) || defined(STM32F031) || \
    defined(STM32F051) || defined(STM32F072) || defined(STM32F042)

  #define STM32F0XX 1

  #include "drv\sys_drv_f0xx.h"
#endif

#if defined(STM32F10X_LD) || defined(STM32F10X_LD_VL) || \
    defined(STM32F10X_MD) || defined(STM32F10X_MD_VL) || \
    defined(STM32F10X_HD) || defined(STM32F10X_HD_VL) || \
    defined(STM32F10X_XL) || defined (STM32F10X_CL)

  #define STM32F10X 1

  #include "drv\sys_drv_f10x.h"
#endif

#if defined(STM32F303x6) || defined(STM32F303x8)

  #define STM32F3XX 1

  #include "drv\sys_drv_f303x8.h"
#endif

#if defined(STM32F303xB) || defined(STM32F303xC)

  #define STM32F3XX 1

  #include "drv\sys_drv_f303xc.h"
#endif

#if defined(STM32F334)

  #define STM32F3XX 1

  #include "drv\sys_drv_f334.h"
#endif

#if defined(STM32G474)

  #define STM32G474 1

  #include "drv\sys_drv_G474.h"
#endif


//-------------------------------------------------------------------------
// define sync const
//-------------------------------------------------------------------------
// sync freq
#define sync_freq 1000

#define sync_prescale 8
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
// define hard prescaler
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
// define tim OCR/RELOAD
//-------------------------------------------------------------------------
#define sync_OCR    (F_CPU/sync_prescale/sync_freq)-1
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
//#define NVIC_SET_IRQ(IRQn) NVIC->ISER[IRQn/32] = 1<<(IRQn%32)
//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------
// RTS
//-------------------------------------------------------------------------
void nvicInit(void);
void clkInit(void);
void syncInit(void);
//-------------------------------------------------------------------------

//-------------------------------------------------------------------------
#endif //_HK_SYS_DRV_H

